<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Custom4 Skin Viewer - Iframe Version</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            overflow: hidden;
        }
        
        #skin_container {
            width: 100%;
            height: 100%;
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="skin_container"></canvas>
    
    <!-- CDN Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.152.2"></script>
    <script src="https://unpkg.com/skinview3d@3.4.1/bundles/skinview3d.min.js"></script>
    
    <script>
        // Wait for page to load
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('skin_container');
            
            // Get size from parent or use default
            const width = window.innerWidth || 400;
            const height = window.innerHeight || 600;
            
            // Initialize skin viewer
            let skinViewer = new skinview3d.SkinViewer({
                canvas: canvas,
                width: width,
                height: height,
                skin: "custom4.png"  // Load custom4.png directly
            });
            
            // Set background color (blue)
            skinViewer.background = 0x1a1a2e;
            
            // Auto rotate
            skinViewer.autoRotate = true;
            skinViewer.autoRotateSpeed = 1.5;
            
            // Zoom
            skinViewer.zoom = 0.8;
            
            // FOV
            skinViewer.fov = 60;
            
            // Add walking animation
            skinViewer.animation = new skinview3d.WalkingAnimation();
            skinViewer.animation.speed = 2;
            
            // Lighting
            skinViewer.cameraLight.intensity = 0.8;
            skinViewer.globalLight.intensity = 0.4;
            
            // Handle resize
            function handleResize() {
                const newWidth = window.innerWidth || 400;
                const newHeight = window.innerHeight || 600;
                skinViewer.width = newWidth;
                skinViewer.height = newHeight;
            }
            
            window.addEventListener('resize', handleResize);
            
            // Check if skin loaded successfully
            setTimeout(function() {
                const img = new Image();
                img.onerror = function() {
                    console.error("custom4.png not found in same directory!");
                    alert("ERROR: File custom4.png tidak ditemukan!\nPastikan file ada di folder yang sama dengan HTML ini.");
                };
                img.src = "custom4.png";
            }, 1000);
        });
    </script>
</body>
</html>
